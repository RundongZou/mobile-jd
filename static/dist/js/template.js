KISSY.add("template/base",function(e){function n(n){if(!t[n]){var r,i,a=e.guid(u),s=[d,a,S,i=K(n),m];try{r=new Function(a,s.join(""))}catch(e){s[3]=l+c+f+","+e.message+l+c,r=new Function(a,s.join(""))}t[n]={name:a,o:i,parser:s.join(""),render:r}}return t[n]}var t={},r={"#":"start","/":"end"},i="KS_TEMPL_STAT_PARAM",a=new RegExp(i,"g"),s="KS_TEMPL",u="KS_DATA_",o="as",l='");',c=s+'.push("',f="KISSY.Template: Syntax Error. ",p="KISSY.Template: Render Error. ",d="var "+s+"=[],"+i+"=false;with(",S="||{}){try{"+s+'.push("',m='");}catch(e){'+s+'=["'+p+'" + e.message]}};return '+s+'.join("");',g=function(e){return e.replace(/\\"/g,'"')},h=function(e){return e.replace(/"/g,'\\"')},_=e.trim,K=function(n){var t,i;return h(_(n).replace(/[\r\t\n]/g," ").replace(/\\/g,"\\\\")).replace(/\{\{([#\/]?)(?!\}\})([^}]*)\}\}/g,function(n,u,o){if(t="",o=g(_(o)),u){i=o.indexOf(" "),o=i===-1?[o,""]:[o.substring(0,i),o.substring(i)];var f,p=o[0],d=_(o[1]),S=v[p];S&&r[u]&&(f=S[r[u]],t=String(e.isFunction(f)?f.apply(this,d.split(/\s+/)):f.replace(a,d)))}else t=s+".push(typeof ("+o+') ==="undefined"?"":'+o+");";return l+t+c})},v={if:{start:"if(typeof ("+i+') !=="undefined" && '+i+"){",end:"}"},else:{start:"}else{"},elseif:{start:"}else if("+i+"){"},each:{start:function(e,n,t,r){var i="_ks_value",a="_ks_index";return n===o&&t&&(i=t||i,a=r||a),"KISSY.each("+e+", function("+i+", "+a+"){"},end:"});"},"!":{start:"/*"+i+"*/"}};return e.mix(n,{log:function(r){r in t?"js_beautify"in window||e.log(t[r].parser,"info"):(n(r),this.log(r))},addStatement:function(n,t){e.isString(n)?v[n]=t:e.mix(v,n)}}),n}),KISSY.add("template/node",function(e,n,t){var r=t.all;e.mix(e,{tmpl:function(e,t){return r(n(r(e).html()).render(t))}})},{requires:["./base","node"]}),KISSY.add("template",function(e,n){return e.Template=n,n},{requires:["template/base","template/node"]});